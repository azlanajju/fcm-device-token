<!DOCTYPE html>
<html>
<head>
    <title>User Page</title>
</head>
<body>
    <h1>Device tokens</h1>
    <p id="token"></p>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-messaging-compat.js"></script>
    
   <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCAFONpVRASRlZPeCVqekIj1OXvhXtFOEQ",
            authDomain: "fir-api-c0d9d.firebaseapp.com",
            databaseURL: "https://fir-api-c0d9d-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "fir-api-c0d9d",
            storageBucket: "fir-api-c0d9d.appspot.com",
            messagingSenderId: "911248093259",
            appId: "1:911248093259:web:794df2cb81aa7b5a0e1dce",
            measurementId: "G-6ZR5R12NB3"
        };


        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Request permission for notifications
        Notification.requestPermission().then((permission) => {
            // if (permission === 'granted') {
                // Retrieve the device token
                const messaging = firebase.messaging();
                messaging.getToken().then((token) => {
                    // Send token to your server
                    document.getElementById('token').innerHTML=token;
                    sendTokenToServer(token);
                }).catch((error) => {
                    console.error('Error retrieving token:', error);
                });
            // } 
            // else {
            //     console.log('Permission denied');
            // }
        });

        function sendTokenToServer(token) {
            // Send the token to your server-side code
            // You can use an AJAX request or any other method to send the token
            console.log('Token:', token);
        }
    </script>
</body>
</html>